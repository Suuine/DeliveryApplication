@model List<Goods>
<link rel="stylesheet" href="~/css/allorders.css" asp-append-version="true" />
<div style="width:100%" class="mt-2">
    <h4>All Orders</h4>
    @if (Model != null && Model.Any())
    {
        @foreach (var order in Model)
        {
            <div class="order-block">
                <table class="table">
                    <thead>
                        <tr>
                            <th>OrderDate</th>
                            <th>OrderStatus</th>
                            <th>Customer</th>
                            <th>Deliverer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@order.CreatedDate?.ToString("dd-MM-yyyy")</td>
                            <td>@order.GoodsStatus?.StatusName</td>
                            <td>@order.NameUser</td>
                            @if (order.DeliverOrders?.NameDeliverer == null)
                            {
                                <td>Order hasn't been taken yet</td>
                            }
                            else
                            {
                                <td>@order.DeliverOrders.NameDeliverer</td>
                            }
                        </tr>
                    </tbody>
                </table>
                @if (order.OrderDetails != null && order.OrderDetails.Any())
                {
                    <table class="table sub-table">
                        <thead>
                            <tr>
                                <th>Asortiment</th>
                                <th>Image</th>
                                <th>Category</th>
                                <th>Unit Price</th>
                                <th>Total Price</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in order.OrderDetails)
                            {
                                <tr>
                                    <td>@item.Asortimet?.Name</td>
                                    <td>
                                        <img src="/pictures/@item.Asortimet?.Image" style="width:80px;height:100px" />
                                    </td>
                                    <td>@item.Asortimet?.Category?.NameCategory</td>
                                    <td>@item.Asortimet?.Cost X @item.Quantity</td>
                                    <td>@(item.Asortimet?.Cost * item.Quantity)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            </div>
        }
    }
    else
    {
        <h2>No any orders</h2>
    }
</div>
